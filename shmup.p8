pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- following tut series 
-- https://www.youtube.com/watch?v=yxrjdmzyv0u

function _init()
 fr=0
 score=0
 flash=0
	--player
	pl = {x=63,
	      y=100,
	      spx=0,
	      spy=0,
	      sp=2,
	      lv=4}
	bl = {x=0,y=-10,life=30}
	flame=4
	cls(0)
	--starfield
	starsx={} starsy={}
	starss={}
	for i=1,100 do
	  cols={6,7,9,10}
	  col=cols[1+flr(rnd(4))]
	  add(starsx,rnd(128))
	  add(starsy,rnd(128))
	  add(starss,rnd(1.5)+0.5)
	end
end

function _update60()
 --ship movement
	if btn(➡️) and pl.x<120 then
		pl.spx=2
		pl.spy=0
		pl.sp=3
	elseif btn(⬅️) and pl.x>0 then
		pl.spx=-2
		pl.spy=0
		pl.sp=2
	elseif btn(⬆️) and pl.y>0 then
	 pl.sp=2
	 pl.spx=0
	 pl.spy=-1
	elseif btn(⬇️) and pl.y>=0 and pl.y<110 then
	 pl.sp=2
	 pl.spx=0
	 pl.spy=2
	else 
	 pl.spy=0
		pl.spx=0	
		pl.sp=2
	end
	pl.x=pl.x+pl.spx
	pl.y=pl.y+pl.spy 
	--flame
	flame=4+rnd(3)
	sfx(1) --flamefx
	
	
	--shooting
	if btnp(❎) then
		sfx(0)
		bl.life=30
		bl.x=pl.x
		bl.y=pl.y-3
		flash=3
	end
	if bl.y>0 then
		bl.y-=5
	end
	bl.life-=1
end

function _draw()
	cls(0)
	fr+=1
	--starfield
	starfield()

	--player
	spr(pl.sp,pl.x,pl.y)
	spr(flame,pl.x,pl.y+6)
	--shooting & bullet
	bang()
	if bl.life>0 then spr(16,bl.x,bl.y) end

 --menu
 menu()
end
-->8
function starfield()
  for i=1,#starsx do
   --flicker color
   local col
   if starss[i]>1.9 then
   	col=7
   elseif starss[i]>1.7 then
    col=6
   else
    col=13
   end
   --render  
			if col==7 then
				line(starsx[i],starsy[i],
				     starsx[i],starsy[i]-1,
				     col)
			else
				pset(starsx[i],starsy[i],col)
			end
			--movement
			if (starsy[i]<128) then
				starsy[i]+=starss[i]
			else
				starsy[i]=0
			end
		end
end

function menu ()
  --score
  print("score: "..score,50,1,6)
  --lives
  for i=0,4 do --5 lives
	  if i<pl.lv then h=7 else h=8 end
	  spr(h,i*6)
  end
end
-->8
function bang()
  if flash>0 then
    circfill(pl.x+3,pl.y-3,flash,7)
    flash-=1
  end
end
__gfx__
000000000000d000000d0000000d1000000000000000000000000000000000000000000000000000000000000000000000010000000100000001000000000000
00000000000d7d0000d7100000d7d00000000000000000000000000002828200028282000000000000000000000000000016100000d610000027100000000000
0070070000d77e100277720000d77100000000000000000000000000080808000888880000000000000000000000000002762000027762000027710000000000
000770000d717e100d71610000d717100a777a0000a7a00000a7a00008000800088888000000000000000000000000000d1e10000d71610000d71d1000000000
000770000d717e102d71612000d7161009aaa900009a9000009a900002808200028882000000000000000000000000002d1521002dd1d12000d71d2000000000
007007000d767e10d77767100d67667002888200009a9000008980000028200000282000000000000000000000000000d765d100d6775d100d67e61000000000
000000000d777e10d77767100d6766700000000000898000002820000000000000000000000000000000000000000000d775d100d77655100d67e61000000000
000000000d282e10d72827100dd282700000000000282000000000000000000000000000000000000000000000000000ddd88100218881200dd8881000000000
00000000000000077000000000000007700000000000000770000000000000000000000000000000000000000000000000000000000000000000000000000000
000979000000001dd10000000000001dd10000000000001dd1000000000000000000000000000000000000000000000000000000000000000000000000000000
000777000000001dd10000000000001dd10000000000001dd1000000000000000000000000000000000000000000000000000000000000000000000000000000
00d777d0000001e661000000000001e76e100000000000166e100000000000000000000000000000000000000000000000000000000000000000000000000000
0089798000001176710000000000017766100000000000176d110000000000000000000000000000000000000000000000000000000000000000000000000000
0089a980000017d67100000000001e7d2de10000000000176cd10000000000000000000000000000000000000000000000000000000000000000000000000000
0028882000001c26761000000000167dcd71000000000167d2d10000000000000000000000000000000000000000000000000000000000000000000000000000
0002220000001d267d1000000000177c2c6100000000016762110000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000001c267d1000000000177c2d71000000000167d2d10000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000001d267d1000000000177c2d6100000000016762110000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000017766d100000000167776e76100000000167d7711000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000177766d100000001777776d67610000000167d6771000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001777766d100000017777776ed6761000000167dd677100000000000000000000000000000000000000000000000000000000000000000000000000
000000000017776661000000017777676d6d771000000017d6d67100000000000000000000000000000000000000000000000000000000000000000000000000
00000000001777d161000000017777676ed67610000000171d6d7100000000000000000000000000000000000000000000000000000000000000000000000000
000000000017dd11610000000177761761ed77100000001711d67100000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02828202828202828202828202828200000000000007600000066006600660666066600000000066600000000000000000000000000000000000000000000000
088888088888088888088888d8080800000000000000000000600060006060606060000600000060600000000000000000000000000000000000000000000000
08888808888808888808888808000800000000000000000000666060006060660066000000000060600000000000000000000000000000000000000000000000
02888202888202888202888202808200000000000000000000006060006060606060000600000060600000000000000000000000000000000000000000000000
00282000282000282000282000282000000000000000000000660006606600606066600000000066600000000000000000000000000000000000000000000000
000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000d00000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000d00000d000000000000000000000000000000000000000000000000000000000000000000000000
0000d00000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000
00000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000d0
000000000000000000000000000000000000000000000000000000000000000000007000000000d00000000000000000000000000000000000000d0000000000
0000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000700000000000000000000000d000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000d000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000
d0000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000700000000
00000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000d000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000006000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000
00d00000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000
00000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d000000000000000000000000000000000000d00000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d0000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000
0d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000
000000000000000000000006000000000000000000000600000000000000000000000000000000000000000000000000000000000000d0000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000600000000060000000000000000000000000600000000000000000000000000000000
00000d0000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000007000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000d0000000000000000000000000000000700000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000d0000000000000
0000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000d61000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000002776200000000000000000000000000000000000000000000000
00000000000d0000000000000000000000000000000000000000000000000000000000000000d716100000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000002dd1d120000000000000000000000000000000000000000000000
00000000d000000000000000000000000700000000000000000000000000000000000000000d6775d1000000000d000000000000000000000000000000000000
000000000000000000000000000000000700000000000000000000000000000000000000000d7765510000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000021888120000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000
00000000000000000000000000000000d00000000000000000000000000000000000000000000a7a0000000d0000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000009a9000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000009a9000000000000000000000000000000000000000000000000
00060000000000000000000000000000000000000000000000000000000000000000000000000898000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000060000000000000000282000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000
0000000000000d00000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000d0000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__sfx__
0001000037330303602d3702935024340203401b33017330133200f3200c320093200631005300106000060000600006000000000000000000000000000000000000000000000000000000000000000000000000
000100000800000610006000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
